
<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>task2</title><style>
:root{
  --bg1:#141a3a; --bg2:#050711;
  --card:rgba(255,255,255,.050);
  --border:rgba(255,255,255,.12);
  --text:#ffffff; --muted:rgba(255,255,255,.72);
  --primary1:#7c7cff; --primary2:#9f7cff;
  --danger:#ff6b6b; --ok:#4cffb3; --warn:#ffd36b;
  --shadow: 0 20px 60px rgba(0,0,0,.55);
  --radius:18px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--text);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:
    radial-gradient(900px 600px at 20% 10%, rgba(124,124,255,.35), transparent 60%),
    radial-gradient(800px 500px at 85% 20%, rgba(159,124,255,.28), transparent 55%),
    radial-gradient(700px 500px at 50% 95%, rgba(76,255,179,.14), transparent 55%),
    radial-gradient(ellipse at top, var(--bg1), var(--bg2));
  display:flex; align-items:center; justify-content:center;
  padding:26px 12px; overflow-x:hidden;
}
.stars:before,.stars:after{
  content:""; position:fixed; inset:-20%;
  background-image:
    radial-gradient(2px 2px at 10% 15%, rgba(255,255,255,.35) 40%, transparent 45%),
    radial-gradient(2px 2px at 35% 80%, rgba(255,255,255,.25) 40%, transparent 45%),
    radial-gradient(1px 1px at 70% 30%, rgba(255,255,255,.28) 40%, transparent 45%),
    radial-gradient(1px 1px at 85% 75%, rgba(255,255,255,.22) 40%, transparent 45%),
    radial-gradient(1px 1px at 55% 55%, rgba(255,255,255,.20) 40%, transparent 45%);
  opacity:.7; pointer-events:none; filter:blur(.2px); animation:drift 18s linear infinite;
}
.stars:after{opacity:.35; animation-duration:28s}
@keyframes drift{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(2%,3%,0)}}

.wrap{width:100%; max-width:440px}
.card{
  width:100%;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.10));
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:22px;
  box-shadow:var(--shadow);
  backdrop-filter: blur(12px);
  position:relative; overflow:hidden;
}
.card:before{
  content:""; position:absolute; inset:-2px;
  background: radial-gradient(520px 240px at 30% 0%, rgba(124,124,255,.22), transparent 60%);
  pointer-events:none;
}
.header{display:flex; align-items:center; gap:12px; margin-bottom:12px; position:relative}
.logo{
  width:46px;height:46px;border-radius:15px;
  background:linear-gradient(135deg, rgba(124,124,255,.60), rgba(159,124,255,.60));
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 0 22px rgba(124,124,255,.28);
  border:1px solid rgba(255,255,255,.16);
  flex:0 0 auto;
}
.logo span{font-weight:900; letter-spacing:.6px}
h1{font-size:20px;line-height:1.15;margin:0;font-weight:760}
.sub{margin:3px 0 0;font-size:13px;color:var(--muted)}
.hr{height:1px;background:rgba(255,255,255,.12);margin:16px 0 14px}

.status{
  padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.18);font-size:13px;color:var(--muted);
  display:flex;align-items:center;justify-content:space-between;gap:10px;
}
.badge{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);white-space:nowrap}
.badge.ok{border-color: rgba(76,255,179,.22); background:rgba(76,255,179,.10); color:rgba(208,255,234,.92)}
.badge.warn{border-color: rgba(255,211,107,.22); background:rgba(255,211,107,.10); color:rgba(255,239,200,.92)}
.badge.bad{border-color: rgba(255,107,107,.22); background:rgba(255,107,107,.10); color:rgba(255,221,221,.92)}

.btn{width:100%;height:46px;border-radius:13px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.05);color:rgba(255,255,255,.92);cursor:pointer;font-weight:650;transition:transform .15s ease, box-shadow .15s ease, opacity .15s ease}
.btn:active{transform:scale(.99)}
.btn.primary{border:none;background:linear-gradient(135deg,var(--primary1),var(--primary2));box-shadow:0 0 20px rgba(124,124,255,.32)}
.btn.primary:hover{box-shadow:0 0 28px rgba(124,124,255,.42)}
.btn[disabled]{opacity:.55;cursor:not-allowed;transform:none}
.btn-row{display:flex;flex-direction:column;gap:10px;margin-top:14px}

.row{margin-top:14px;display:flex;align-items:center;justify-content:space-between;gap:10px}
.lang{height:36px;border-radius:11px;border:1px solid rgba(255,255,255,.16);background:rgba(0,0,0,.22);color:rgba(255,255,255,.92);padding:0 10px;font-size:13px}
.report-link{font-size:12px;color:rgba(255,255,255,.66);cursor:pointer;user-select:none;text-decoration:underline;text-decoration-color: rgba(255,255,255,.22);text-underline-offset:3px}
.report-link:hover{color:rgba(255,255,255,.82)}

.input,.select,.textarea{
  width:100%;
  border-radius:13px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(0,0,0,.22);
  color:rgba(255,255,255,.94);
  padding:11px 12px;
  font-size:13px;
  outline:none;
}
.textarea{min-height:96px;resize:none}

.socials{display:flex;justify-content:center;gap:10px;margin-top:14px;flex-wrap:wrap}
.social-btn{
  display:flex;align-items:center;gap:8px;
  height:36px;padding:0 10px;border-radius:12px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.05);
  color:rgba(255,255,255,.86);
  text-decoration:none;font-size:12px;
  transition: box-shadow .15s ease, opacity .15s ease;
  opacity:.9;
}
.social-btn:hover{opacity:1; box-shadow:0 0 18px rgba(124,124,255,.25)}
.social-btn svg{width:16px;height:16px;opacity:.9}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.58);display:none;align-items:center;justify-content:center;padding:18px 12px;z-index:50}
.modal.open{display:flex}
.modal .panel{
  width:100%;max-width:440px;background:rgba(18,22,44,.78);
  border:1px solid rgba(255,255,255,.14);border-radius:18px;padding:18px;
  backdrop-filter: blur(14px);box-shadow:var(--shadow);
}
.modal h3{margin:0 0 10px;font-size:16px}
.muted{font-size:12px;color:rgba(255,255,255,.58);margin-top:8px}
.modal .actions{display:flex;gap:10px;margin-top:12px}
.modal .actions .btn{height:44px}

.small{font-size:12px;color:rgba(255,255,255,.66)}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:10px;border-bottom:1px solid rgba(255,255,255,.10);font-size:13px;color:rgba(255,255,255,.86);text-align:left;vertical-align:top}
.table th{color:rgba(255,255,255,.68);font-weight:650}
@media (max-width:520px){.card{padding:18px}.row{flex-direction:column;align-items:flex-start}.lang{width:100%}}
</style></head>
<body class="stars"><div class="wrap"><div class="card">
<div class="header"><div class="logo"><img src="https://raw.githubusercontent.com/aovo4504-bit/Cozyhub/refs/heads/main/IMG_0830.png" alt="CozyHub" style="width:100%;height:100%;border-radius:50%;object-fit:cover;"/></div><div>
<h1 data-i18n="step2"></h1><div class="sub">Secure gateway</div></div></div>
<div class="hr"></div>
<div class="status"><span id="statusText" data-i18n="checking"></span><span class="badge" id="statusBadge">...</span></div>
<div class="btn-row"><button class="btn primary" id="actionBtn" disabled>...</button></div>
<div class="row"><div class="report-link" id="reportOpen" data-i18n="report"></div>
<select class="lang" id="langSelect" onchange="setLang(this.value)"><option value="en">EN</option><option value="vi">VI</option><option value="id">ID</option><option value="th">TH</option><option value="es">ES</option></select></div>
</div></div>

<div class="modal" id="reportModal"><div class="panel">
  <h3 data-i18n="report_title"></h3>
  <div class="field">
    <select class="select" id="reportType">
      <option value="" data-i18n="report_type"></option>
      <option value="step" data-i18n="r_step"></option>
      <option value="key" data-i18n="r_key"></option>
      <option value="redirect" data-i18n="r_redirect"></option>
      <option value="ui" data-i18n="r_ui"></option>
      <option value="other" data-i18n="r_other"></option>
    </select>
  </div>
  <div class="field">
    <textarea class="textarea" id="reportMessage" data-i18n-placeholder="report_placeholder"></textarea>
    <div class="muted" data-i18n="report_hint"></div>
  </div>
  <div class="actions">
    <button class="btn primary" id="reportSend" data-i18n="report_send"></button>
    <button class="btn" id="reportCancel" data-i18n="cancel"></button>
  </div>
</div></div>

<script>
const CONFIG={
  WORKER_BASE_URL:"https://cozyhub-task-gateway.aovo4504.workers.dev",
  HOME_URL:"https://aovo4504-bit.github.io/CozyHub.key/",
  THIS_TASK:"task2",
  NEXT_TASK_URL:"https://aovo4504-bit.github.io/Cozyhub/",
  VERIFY_WORKER_URL:"https://cozyhub-verify2.aovo4504.workers.dev"
};
const PAGE_NAME="task2";
</script>
<script>const LANG={"en": {"brand": "CozyHub", "subtitle": "", "checking": "Checking your status...", "start": "Start", "continue": "Continue", "key_active": "Key Active", "cooldown": "Cooldown active", "maintenance": "Maintenance", "report": "Report", "report_title": "Report an Issue", "report_send": "Send Report", "report_type": "Select issue type", "r_step": "Step not working", "r_key": "Key issue", "r_redirect": "Wrong redirect", "r_ui": "UI bug", "r_other": "Other", "report_placeholder": "Describe your issue here...", "report_hint": "Choose the closest category and describe details.", "cancel": "Cancel", "ok": "OK", "need_action": "Action required", "blocked": "Blocked", "step1": "Step 1", "step2": "Step 2", "step_done": "Step completed", "step_not_done": "Step not completed", "back_home": "Back to Home", "back_step1": "Back to Step 1", "getkey": "Get Key", "getkey_ready": "Your key is ready", "copy": "Copy Key", "expires_in": "Expires in", "copied_getkey": "Get key link copied", "checkkey": "Check Key", "enter_key": "Enter your key", "verify": "Verify", "getkey_btn": "Get Key", "verified": "Verified", "expired": "Expired", "invalid": "Invalid", "sent": "Report sent successfully"}, "vi": {"brand": "CozyHub", "subtitle": "", "checking": "Đang kiểm tra trạng thái...", "start": "Bắt đầu", "continue": "Tiếp tục", "key_active": "Key đang hoạt động", "cooldown": "Đang cooldown", "maintenance": "Bảo trì", "report": "Báo lỗi", "report_title": "Báo lỗi", "report_send": "Gửi báo lỗi", "report_type": "Chọn loại lỗi", "r_step": "Bước không hoạt động", "r_key": "Lỗi key", "r_redirect": "Chuyển trang sai", "r_ui": "Lỗi UI", "r_other": "Khác", "report_placeholder": "Mô tả lỗi của bạn...", "report_hint": "Chọn loại gần đúng nhất rồi mô tả chi tiết.", "cancel": "Huỷ", "ok": "OK", "need_action": "Cần thao tác", "blocked": "Bị chặn", "step1": "Bước 1", "step2": "Bước 2", "step_done": "Đã hoàn thành bước", "step_not_done": "Chưa hoàn thành bước", "back_home": "Về Home", "back_step1": "Về Bước 1", "getkey": "Lấy Key", "getkey_ready": "Key của bạn đã sẵn sàng", "copy": "Copy Key", "expires_in": "Hết hạn sau", "copied_getkey": "Đã sao chép link lấy key", "checkkey": "Kiểm tra Key", "enter_key": "Nhập key", "verify": "Xác minh", "getkey_btn": "GetKey", "verified": "Xác minh thành công", "expired": "Hết hạn", "invalid": "Sai key", "sent": "Đã gửi báo lỗi"}, "id": {"brand": "CozyHub", "subtitle": "", "checking": "Memeriksa status...", "start": "Mulai", "continue": "Lanjutkan", "key_active": "Key aktif", "cooldown": "Cooldown aktif", "maintenance": "Pemeliharaan", "report": "Laporkan", "report_title": "Laporkan Masalah", "report_send": "Kirim Laporan", "report_type": "Pilih jenis masalah", "r_step": "Langkah tidak berfungsi", "r_key": "Masalah key", "r_redirect": "Redirect salah", "r_ui": "Bug UI", "r_other": "Lainnya", "report_placeholder": "Jelaskan masalah Anda...", "report_hint": "Pilih kategori terdekat lalu jelaskan detail.", "cancel": "Batal", "ok": "OK", "need_action": "Perlu tindakan", "blocked": "Diblokir", "step1": "Langkah 1", "step2": "Langkah 2", "step_done": "Langkah selesai", "step_not_done": "Langkah belum selesai", "back_home": "Kembali ke Home", "back_step1": "Kembali ke Langkah 1", "getkey": "Dapatkan Key", "getkey_ready": "Key Anda siap", "copy": "Salin Key", "expires_in": "Kedaluwarsa dalam", "copied_getkey": "Tautan get key disalin", "checkkey": "Periksa Key", "enter_key": "Masukkan key", "verify": "Verifikasi", "getkey_btn": "GetKey", "verified": "Terverifikasi", "expired": "Kedaluwarsa", "invalid": "Key tidak valid", "sent": "Laporan terkirim"}, "th": {"brand": "CozyHub", "subtitle": "", "checking": "กำลังตรวจสอบสถานะ...", "start": "เริ่ม", "continue": "ดำเนินการต่อ", "key_active": "คีย์ใช้งานอยู่", "cooldown": "คูลดาวน์", "maintenance": "ปิดปรับปรุง", "report": "รายงาน", "report_title": "รายงานปัญหา", "report_send": "ส่งรายงาน", "report_type": "เลือกประเภทปัญหา", "r_step": "ขั้นตอนใช้ไม่ได้", "r_key": "ปัญหาคีย์", "r_redirect": "เปลี่ยนหน้าไม่ถูก", "r_ui": "บั๊ก UI", "r_other": "อื่นๆ", "report_placeholder": "อธิบายปัญหาของคุณ...", "report_hint": "เลือกหมวดใกล้เคียงแล้วใส่รายละเอียด", "cancel": "ยกเลิก", "ok": "OK", "need_action": "ต้องดำเนินการ", "blocked": "ถูกบล็อก", "step1": "ขั้นตอน 1", "step2": "ขั้นตอน 2", "step_done": "เสร็จสิ้น", "step_not_done": "ยังไม่เสร็จ", "back_home": "กลับหน้าแรก", "back_step1": "กลับขั้นตอน 1", "getkey": "รับคีย์", "getkey_ready": "คีย์พร้อมแล้ว", "copy": "คัดลอกคีย์", "expires_in": "หมดอายุใน", "copied_getkey": "คัดลอกลิงก์รับคีย์แล้ว", "checkkey": "ตรวจคีย์", "enter_key": "กรอกคีย์", "verify": "ตรวจสอบ", "getkey_btn": "GetKey", "verified": "ยืนยันแล้ว", "expired": "หมดอายุ", "invalid": "คีย์ไม่ถูกต้อง", "sent": "ส่งรายงานแล้ว"}, "es": {"brand": "CozyHub", "subtitle": "", "checking": "Comprobando estado...", "start": "Empezar", "continue": "Continuar", "key_active": "Clave activa", "cooldown": "En enfriamiento", "maintenance": "Mantenimiento", "report": "Reportar", "report_title": "Reportar un problema", "report_send": "Enviar reporte", "report_type": "Selecciona el tipo", "r_step": "El paso no funciona", "r_key": "Problema de clave", "r_redirect": "Redirección incorrecta", "r_ui": "Error de UI", "r_other": "Otro", "report_placeholder": "Describe el problema...", "report_hint": "Elige la categoría más cercana y describe detalles.", "cancel": "Cancelar", "ok": "OK", "need_action": "Acción requerida", "blocked": "Bloqueado", "step1": "Paso 1", "step2": "Paso 2", "step_done": "Paso completado", "step_not_done": "Paso no completado", "back_home": "Volver al inicio", "back_step1": "Volver al Paso 1", "getkey": "Obtener clave", "getkey_ready": "Tu clave está lista", "copy": "Copiar clave", "expires_in": "Expira en", "copied_getkey": "Enlace copiado", "checkkey": "Verificar clave", "enter_key": "Ingresa tu clave", "verify": "Verificar", "getkey_btn": "GetKey", "verified": "Verificado", "expired": "Expirada", "invalid": "Inválida", "sent": "Reporte enviado"}};</script><script>
let lang = localStorage.getItem("lang") || "en";
function t(k){ return (LANG[lang] && LANG[lang][k]) ? LANG[lang][k] : (LANG.en && LANG.en[k]) ? LANG.en[k] : k; }
function applyLang(){
  document.querySelectorAll("[data-i18n]").forEach(el=>{ const k=el.getAttribute("data-i18n"); if(k) el.innerText=t(k); });
  document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{ const k=el.getAttribute("data-i18n-placeholder"); if(k) el.placeholder=t(k); });
  const sel=document.getElementById("langSelect"); if(sel) sel.value=lang;
}
function setLang(v){ lang=v; localStorage.setItem("lang",v); applyLang(); }
document.addEventListener("DOMContentLoaded", applyLang);
</script>
<script>
const statusText=document.getElementById("statusText");
const statusBadge=document.getElementById("statusBadge");
const actionBtn=document.getElementById("actionBtn");
function setBadge(kind,text){statusBadge.className="badge "+(kind||"");statusBadge.innerText=text||"...";}
function setAction(label,href){actionBtn.innerText=label;actionBtn.disabled=false;actionBtn.onclick=()=>location.href=href;}
async function loadGate(){
  applyLang(); setBadge("","..."); actionBtn.disabled=true;
  try{
    const r=await fetch(CONFIG.WORKER_BASE_URL+"/task2"); const j=await r.json();
    if(j.state==="MAINTENANCE"){setBadge("warn",t("maintenance"));statusText.innerText=j.message||t("maintenance");setAction(t("back_home"), CONFIG.HOME_URL);return;}
    if(j.state==="NEED_STEP1"){setBadge("warn",t("need_action"));statusText.innerText=t("step_not_done");setAction(t("back_home"), CONFIG.HOME_URL);return;}
    if(j.state==="NEED_STEP2"){setBadge("warn",t("need_action"));statusText.innerText=t("step_not_done");setAction(t("back_step1"),CONFIG.TASK1_URL);return;}
    setBadge("ok",t("ok")); statusText.innerText=t("step_done"); setAction(t("continue"), CONFIG.GETKEY_URL);
  }catch(e){setBadge("bad",t("blocked"));statusText.innerText="Worker not connected";setAction(t("back_home"), CONFIG.HOME_URL);}
}
document.addEventListener("DOMContentLoaded",loadGate);

const modal = document.getElementById("reportModal");
document.getElementById("reportOpen").onclick = ()=>modal.classList.add("open");
document.getElementById("reportCancel").onclick = ()=>modal.classList.remove("open");
modal.addEventListener("click", (e)=>{ if(e.target===modal) modal.classList.remove("open"); });
document.getElementById("reportSend").onclick = async ()=>{
  const type = document.getElementById("reportType").value;
  const msg = (document.getElementById("reportMessage").value || "").trim();
  if(!type) return;
  if(type==="other" && msg.length < 5) return;
  await fetch(CONFIG.WORKER_BASE_URL + "/report", {
    method:"POST",
    headers:{ "content-type":"application/json" },
    body: JSON.stringify({ page: PAGE_NAME, type, message: msg, time: Math.floor(Date.now()/1000) })
  });
  modal.classList.remove("open");
  setBadge("ok", t("ok"));
  statusText.innerText = t("sent");
};

</script></body></html>
